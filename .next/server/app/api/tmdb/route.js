"use strict";(()=>{var e={};e.id=372,e.ids=[372],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3053:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>_,requestAsyncStorage:()=>g,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>d,dynamic:()=>i});var a=r(9303),o=r(8716),n=r(670),p=r(7070);let i="force-dynamic",u="484e497db0c8f1cda6a94a805cc76c4b",l="https://api.themoviedb.org/3";async function d(e){try{let{searchParams:t}=new URL(e.url),r=t.get("query")||"",s=t.get("id"),a=t.get("type")||"movie",o=t.get("list")||"popular";if(console.log("TMDB Request:",{query:r,type:a,list:o,hasKey:!!u}),!u)return p.NextResponse.json({success:!1,message:"TMDB_API_KEY not set in environment",keyPresent:!1});let n="";if(s)n=`${l}/${a}/${s}?api_key=${u}&language=en-US`;else if(r)n=`${l}/search/${a}?api_key=${u}&language=en-US&query=${encodeURIComponent(r)}&page=1`,console.log("TMDB URL:",n);else{if(!o)return p.NextResponse.json({success:!1,message:"Query or list parameter required"});n="trending"===o?`${l}/trending/${a}/week?api_key=${u}&language=en-US&page=1`:`${l}/${a}/${o}?api_key=${u}&language=en-US&page=1`}let i=await fetch(n),d=await i.json();if(console.log("TMDB Response status:",i.status),d.results&&console.log("TMDB Results count:",d.results.length),!i.ok)return p.NextResponse.json({success:!1,message:d.status_message||"TMDB API error",tmdbError:d});if(d.results){let e=d.results.slice(0,20).map(e=>({tmdbId:e.id,title:e.title||e.name,overview:e.overview,poster:e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:null,backdrop:e.backdrop_path?`https://image.tmdb.org/t/p/original${e.backdrop_path}`:null,rating:e.vote_average,releaseDate:e.release_date||e.first_air_date,type:a}));return p.NextResponse.json({success:!0,data:{results:e}})}return p.NextResponse.json({success:!0,data:{tmdbId:d.id,title:d.title||d.name,overview:d.overview,poster:d.poster_path?`https://image.tmdb.org/t/p/w500${d.poster_path}`:null,backdrop:d.backdrop_path?`https://image.tmdb.org/t/p/original${d.backdrop_path}`:null,rating:d.vote_average,releaseDate:d.release_date||d.first_air_date,genres:d.genres?.map(e=>e.name)||[]}})}catch(e){return console.error("TMDB API error:",e),p.NextResponse.json({success:!1,message:e instanceof Error?e.message:"Unknown error"})}}let c=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tmdb/route",pathname:"/api/tmdb",filename:"route",bundlePath:"app/api/tmdb/route"},resolvedPagePath:"D:\\downloads\\Iframe Player Update\\my-app\\src\\app\\api\\tmdb\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:h}=c,v="/api/tmdb/route";function _(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(3053));module.exports=s})();