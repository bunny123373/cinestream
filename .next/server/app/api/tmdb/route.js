"use strict";(()=>{var e={};e.id=372,e.ids=[372],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3053:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>l});var a=r(9303),o=r(8716),n=r(670),p=r(7070);let i="484e497db0c8f1cda6a94a805cc76c4b",u="https://api.themoviedb.org/3";async function l(e){try{let{searchParams:t}=new URL(e.url),r=t.get("query")||"",s=t.get("id"),a=t.get("type")||"movie";if(console.log("TMDB Request:",{query:r,type:a,hasKey:!!i}),!i)return p.NextResponse.json({success:!1,message:"TMDB_API_KEY not set in environment",keyPresent:!1});let o="";if(s)o=`${u}/${a}/${s}?api_key=${i}&language=en-US`;else{if(!r)return p.NextResponse.json({success:!1,message:"Query parameter required"});o=`${u}/search/${a}?api_key=${i}&language=en-US&query=${encodeURIComponent(r)}&page=1`,console.log("TMDB URL:",o)}let n=await fetch(o),l=await n.json();if(console.log("TMDB Response status:",n.status),l.results&&console.log("TMDB Results count:",l.results.length),!n.ok)return p.NextResponse.json({success:!1,message:l.status_message||"TMDB API error",tmdbError:l});if(l.results){let e=l.results.slice(0,8).map(e=>({tmdbId:e.id,title:e.title||e.name,overview:e.overview,poster:e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:null,rating:e.vote_average,releaseDate:e.release_date||e.first_air_date}));return p.NextResponse.json({success:!0,data:{results:e}})}return p.NextResponse.json({success:!0,data:{tmdbId:l.id,title:l.title||l.name,overview:l.overview,poster:l.poster_path?`https://image.tmdb.org/t/p/w500${l.poster_path}`:null,backdrop:l.backdrop_path?`https://image.tmdb.org/t/p/original${l.backdrop_path}`:null,rating:l.vote_average,releaseDate:l.release_date||l.first_air_date,genres:l.genres?.map(e=>e.name)||[]}})}catch(e){return console.error("TMDB API error:",e),p.NextResponse.json({success:!1,message:e instanceof Error?e.message:"Unknown error"})}}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tmdb/route",pathname:"/api/tmdb",filename:"route",bundlePath:"app/api/tmdb/route"},resolvedPagePath:"D:\\downloads\\Iframe Player Update\\my-app\\src\\app\\api\\tmdb\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=d,h="/api/tmdb/route";function v(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(3053));module.exports=s})();