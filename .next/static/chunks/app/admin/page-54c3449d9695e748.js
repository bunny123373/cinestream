(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1477:function(e,s,t){Promise.resolve().then(t.bind(t,1935))},1935:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return P}});var a=t(7437),l=t(2265),r=t(7138),n=t(1513),o=t(4446),i=t(4258),d=t(5137),c=t(9896),m=t(2990),x=t(2513),u=t(4817),p=t(3274),b=t(2023),h=t(8604),F=t(4436),g=t(6717),f=t(4241),j=t(9338),N=t(2449),y=t(7164),v=t(8184);function A(e){let{adminKey:s,onSuccess:t}=e,[r,o]=(0,l.useState)(!1),[i,d]=(0,l.useState)(null),[c,x]=(0,l.useState)(!1),[A,C]=(0,l.useState)(""),[w,k]=(0,l.useState)(!1),[D,B]=(0,l.useState)([]),[E,S]=(0,l.useState)(!1),[Z,L]=(0,l.useState)({title:"",description:"",poster:"",backdrop:"",language:"",category:"",year:new Date().getFullYear(),rating:"",duration:"",embedIframeLink:"",downloadLink:"",tmdbId:""}),I=async e=>{if(e.preventDefault(),A.trim()){k(!0),B([]),S(!0);try{var s;let e=await fetch("/api/tmdb?query=".concat(encodeURIComponent(A),"&type=movie")),t=await e.json();console.log("TMDB Response:",t),t.success&&(null===(s=t.data)||void 0===s?void 0:s.results)&&t.data.results.length>0?B(t.data.results):console.log("No results or error:",t.message)}catch(e){console.error("Search error:",e)}finally{k(!1)}}},q=e=>{L(s=>{var t,a;return{...s,title:e.title||"",description:e.overview||"",poster:e.poster||"",backdrop:e.backdrop||"",year:e.releaseDate?new Date(e.releaseDate).getFullYear():new Date().getFullYear(),rating:(null===(t=e.rating)||void 0===t?void 0:t.toString())||"",tmdbId:(null===(a=e.tmdbId)||void 0===a?void 0:a.toString())||""}}),C(e.title||""),S(!1),B([])},T=e=>{let{name:s,value:t}=e.target;L(e=>({...e,[s]:"year"===s||"rating"===s?t?parseFloat(t):"":t}))},M=async e=>{e.preventDefault(),o(!0),d(null),x(!1);try{let e={title:Z.title,description:Z.description,type:"movie",poster:Z.poster,backdrop:Z.backdrop||null,language:Z.language,category:Z.category,year:Number(Z.year),rating:Z.rating?parseFloat(Z.rating):null,duration:Z.duration||null,movieData:{embedIframeLink:Z.embedIframeLink||null,downloadLink:Z.downloadLink}},a=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json","x-admin-key":s},body:JSON.stringify(e)}),l=await a.json();if(!l.success)throw Error(l.message||"Failed to upload movie");x(!0),L({title:"",description:"",poster:"",backdrop:"",language:"",category:"",year:new Date().getFullYear(),rating:"",duration:"",embedIframeLink:"",downloadLink:"",tmdbId:""}),C(""),null==t||t()}catch(e){d(e instanceof Error?e.message:"An error occurred")}finally{o(!1)}};return(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl p-6 sm:p-8",style:{background:"linear-gradient(135deg, #0E1015 0%, #1a1d26 100%)",border:"1px solid #1F232D"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-[#F5C542]/10 flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-[#F5C542]"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-[#F9FAFB]",children:"Upload Movie"})]}),(0,a.jsx)("div",{className:"mb-6 p-4 rounded-xl bg-[#8B5CF6]/10 border border-[#8B5CF6]/20 relative",children:(0,a.jsxs)("form",{onSubmit:I,className:"relative",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 inline mr-1"}),"Search from TMDB (Auto-fill details)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:A,onChange:e=>{C(e.target.value),e.target.value||(S(!1),B([]))},onFocus:()=>D.length>0&&S(!0),className:"flex-1 px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors",placeholder:"Search movies..."}),(0,a.jsx)("button",{type:"submit",disabled:w,className:"px-4 py-3 rounded-xl bg-[#8B5CF6] text-white font-medium hover:bg-[#8B5CF6]/90 transition-colors disabled:opacity-50",children:w?(0,a.jsx)(p.Z,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(u.Z,{className:"w-5 h-5"})})]}),E&&D.length>0&&(0,a.jsx)("div",{className:"absolute z-50 left-0 right-0 mt-2 bg-[#1a1d26] border border-[#1F232D] rounded-xl max-h-60 overflow-y-auto shadow-xl",children:D.map(e=>{var s,t;return(0,a.jsxs)("button",{type:"button",onClick:()=>q(e),className:"w-full flex items-center gap-3 p-3 hover:bg-[#8B5CF6]/20 transition-colors text-left border-b border-[#1F232D]/50 last:border-0",children:[e.poster&&(0,a.jsx)("img",{src:e.poster,alt:"",className:"w-10 h-14 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-[#F9FAFB] font-medium truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-[#9CA3AF]",children:[null===(s=e.releaseDate)||void 0===s?void 0:s.split("-")[0]," • ",null===(t=e.rating)||void 0===t?void 0:t.toFixed(1)," ★"]})]})]},e.tmdbId)})})]})}),i&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400",children:i}),c&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-xl bg-[#22C55E]/10 border border-[#22C55E]/20 text-[#22C55E]",children:"Movie uploaded successfully!"}),(0,a.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 inline mr-1"}),"Title *"]}),(0,a.jsx)("input",{type:"text",name:"title",value:Z.title,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"Enter movie title"})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 inline mr-1"}),"Description *"]}),(0,a.jsx)("textarea",{name:"description",value:Z.description,onChange:T,required:!0,rows:4,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors resize-none",placeholder:"Enter movie description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-1"}),"Poster URL *"]}),(0,a.jsx)("input",{type:"url",name:"poster",value:Z.poster,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/poster.jpg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-1"}),"Backdrop URL"]}),(0,a.jsx)("input",{type:"url",name:"backdrop",value:Z.backdrop,onChange:T,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/backdrop.jpg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(F.Z,{className:"w-4 h-4 inline mr-1"}),"Language *"]}),(0,a.jsx)("input",{type:"text",name:"language",value:Z.language,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"e.g., English, Hindi"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 inline mr-1"}),"Category *"]}),(0,a.jsx)("input",{type:"text",name:"category",value:Z.category,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"e.g., Action, Drama"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 inline mr-1"}),"Year *"]}),(0,a.jsx)("input",{type:"number",name:"year",value:Z.year,onChange:T,required:!0,min:1900,max:2100,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 inline mr-1"}),"Rating (TMDB)"]}),(0,a.jsx)("input",{type:"number",name:"rating",value:Z.rating,onChange:T,min:0,max:10,step:.1,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"0.0 - 10.0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:"Duration"}),(0,a.jsx)("input",{type:"text",name:"duration",value:Z.duration,onChange:T,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"e.g., 2h 30m"})]})]}),(0,a.jsxs)("div",{className:"p-6 rounded-xl space-y-6",style:{background:"rgba(245, 197, 66, 0.05)",border:"1px solid rgba(245, 197, 66, 0.2)"},children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-[#F5C542] flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5"}),"Streaming Links"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:"Embed Iframe Link"}),(0,a.jsx)("input",{type:"url",name:"embedIframeLink",value:Z.embedIframeLink,onChange:T,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/embed/..."}),(0,a.jsx)("p",{className:"mt-1 text-xs text-[#9CA3AF]",children:"Paste embed player URL (iframe src link)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 inline mr-1"}),"Download Link *"]}),(0,a.jsx)("input",{type:"url",name:"downloadLink",value:Z.downloadLink,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/download/..."})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:r,className:"w-full py-4 px-6 rounded-xl bg-[#F5C542] text-[#050608] font-semibold flex items-center justify-center gap-2 hover:bg-[#F5C542]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-[#050608] border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"Upload Movie"]})})]})]})}var C=t(2675),w=t(883),k=t(4392),D=t(2421),B=t(8094);function E(e){let{seasons:s,onChange:t}=e,[r,i]=(0,l.useState)([1]),d=e=>{i(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},c=e=>{t(s.filter(s=>s.seasonNumber!==e)),i(s=>s.filter(s=>s!==e))},m=e=>{let a=s.find(s=>s.seasonNumber===e);if(!a)return;let l=a.episodes.length>0?Math.max(...a.episodes.map(e=>e.episodeNumber))+1:1,r={episodeNumber:l,episodeTitle:"Episode ".concat(l),embedIframeLink:"",downloadLink:"",quality:"HD"};t(s.map(s=>s.seasonNumber===e?{...s,episodes:[...s.episodes,r]}:s))},u=(e,a)=>{t(s.map(s=>s.seasonNumber===e?{...s,episodes:s.episodes.filter(e=>e.episodeNumber!==a)}:s))},p=(e,a,l)=>{t(s.map(s=>s.seasonNumber===e?{...s,episodes:s.episodes.map(e=>e.episodeNumber===a?{...e,...l}:e)}:s))};return(0,a.jsxs)("div",{className:"space-y-4",children:[0===s.length&&(0,a.jsx)("div",{className:"text-center py-8 text-[#9CA3AF]",children:"No seasons added yet. Click the button below to add a season."}),s.map(e=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, #0E1015 0%, #1a1d26 100%)",border:"1px solid #1F232D"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-[#1F232D]/30 transition-colors",onClick:()=>d(e.seasonNumber),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-[#F5C542]/10 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-sm font-bold text-[#F5C542]",children:["S",e.seasonNumber]})}),(0,a.jsxs)("span",{className:"font-medium text-[#F9FAFB]",children:["Season ",e.seasonNumber]}),(0,a.jsxs)("span",{className:"text-sm text-[#9CA3AF]",children:["(",e.episodes.length," episode",1!==e.episodes.length?"s":"",")"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:s=>{s.stopPropagation(),c(e.seasonNumber)},className:"p-2 rounded-lg hover:bg-red-500/10 text-[#9CA3AF] hover:text-red-400 transition-colors",children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})}),r.includes(e.seasonNumber)?(0,a.jsx)(k.Z,{className:"w-5 h-5 text-[#9CA3AF]"}):(0,a.jsx)(D.Z,{className:"w-5 h-5 text-[#9CA3AF]"})]})]}),(0,a.jsx)(o.M,{children:r.includes(e.seasonNumber)&&(0,a.jsx)(n.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4 pt-0 space-y-3",children:[0===e.episodes.length&&(0,a.jsx)("div",{className:"text-center py-4 text-[#9CA3AF] text-sm",children:"No episodes added yet."}),e.episodes.map(s=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"p-4 rounded-xl bg-[#050608] border border-[#1F232D] space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded bg-[#8B5CF6]/10 flex items-center justify-center",children:(0,a.jsx)(B.Z,{className:"w-3 h-3 text-[#8B5CF6]"})}),(0,a.jsxs)("span",{className:"text-sm font-medium text-[#F9FAFB]",children:["Episode ",s.episodeNumber]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>u(e.seasonNumber,s.episodeNumber),className:"p-1.5 rounded hover:bg-red-500/10 text-[#9CA3AF] hover:text-red-400 transition-colors",children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#9CA3AF] mb-1",children:"Episode Title *"}),(0,a.jsx)("input",{type:"text",value:s.episodeTitle,onChange:t=>p(e.seasonNumber,s.episodeNumber,{episodeTitle:t.target.value}),className:"w-full px-3 py-2 rounded-lg bg-[#0E1015] border border-[#1F232D] text-[#F9FAFB] text-sm focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"Episode title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#9CA3AF] mb-1",children:"Quality"}),(0,a.jsxs)("select",{value:s.quality,onChange:t=>p(e.seasonNumber,s.episodeNumber,{quality:t.target.value}),className:"w-full px-3 py-2 rounded-lg bg-[#0E1015] border border-[#1F232D] text-[#F9FAFB] text-sm focus:border-[#F5C542] focus:outline-none transition-colors",children:[(0,a.jsx)("option",{value:"SD",children:"SD"}),(0,a.jsx)("option",{value:"HD",children:"HD"}),(0,a.jsx)("option",{value:"FHD",children:"FHD"}),(0,a.jsx)("option",{value:"4K",children:"4K"})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-medium text-[#9CA3AF] mb-1",children:[(0,a.jsx)(N.Z,{className:"w-3 h-3 inline mr-1"}),"Embed Iframe Link"]}),(0,a.jsx)("input",{type:"url",value:s.embedIframeLink||"",onChange:t=>p(e.seasonNumber,s.episodeNumber,{embedIframeLink:t.target.value}),className:"w-full px-3 py-2 rounded-lg bg-[#0E1015] border border-[#1F232D] text-[#F9FAFB] text-sm focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/embed/..."}),(0,a.jsx)("p",{className:"mt-1 text-xs text-[#9CA3AF]",children:"Paste embed player URL (iframe src link)"})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-medium text-[#9CA3AF] mb-1",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3 inline mr-1"}),"Download Link *"]}),(0,a.jsx)("input",{type:"url",value:s.downloadLink,onChange:t=>p(e.seasonNumber,s.episodeNumber,{downloadLink:t.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg bg-[#0E1015] border border-[#1F232D] text-[#F9FAFB] text-sm focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/download/..."})]})]})]},s.episodeNumber)),(0,a.jsxs)("button",{type:"button",onClick:()=>m(e.seasonNumber),className:"w-full py-3 rounded-xl border border-dashed border-[#1F232D] text-[#9CA3AF] hover:text-[#F5C542] hover:border-[#F5C542]/50 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Add Episode"]})]})})})]},e.seasonNumber)),(0,a.jsxs)("button",{type:"button",onClick:()=>{let e=s.length>0?Math.max(...s.map(e=>e.seasonNumber))+1:1;t([...s,{seasonNumber:e,episodes:[]}]),i(s=>[...s,e])},className:"w-full py-4 rounded-xl bg-[#F5C542]/10 border border-[#F5C542]/30 text-[#F5C542] hover:bg-[#F5C542]/20 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Add Season"]})]})}function S(e){let{adminKey:s,onSuccess:t}=e,[r,o]=(0,l.useState)(!1),[i,d]=(0,l.useState)(null),[c,m]=(0,l.useState)(!1),[x,N]=(0,l.useState)(""),[y,A]=(0,l.useState)(!1),[w,k]=(0,l.useState)([]),[D,B]=(0,l.useState)(!1),[S,Z]=(0,l.useState)({title:"",description:"",poster:"",backdrop:"",language:"",category:"",year:new Date().getFullYear(),rating:"",seasons:[],tmdbId:""}),L=async e=>{if(e.preventDefault(),x.trim()){A(!0),k([]),B(!0);try{let e=await fetch("/api/tmdb?query=".concat(encodeURIComponent(x),"&type=tv")),s=await e.json();s.success&&k(s.data.results||[s.data])}catch(e){console.error("Search error:",e)}finally{A(!1)}}},I=async e=>{Z(s=>{var t,a;return{...s,title:e.title||"",description:e.overview||"",poster:e.poster||"",backdrop:e.backdrop||"",year:e.releaseDate?new Date(e.releaseDate).getFullYear():new Date().getFullYear(),rating:(null===(t=e.rating)||void 0===t?void 0:t.toString())||"",tmdbId:(null===(a=e.tmdbId)||void 0===a?void 0:a.toString())||""}}),N(e.title||""),B(!1),k([])},q=e=>{let{name:s,value:t}=e.target;Z(e=>({...e,[s]:"year"===s||"rating"===s?t?parseFloat(t):"":t}))},T=async e=>{if(e.preventDefault(),o(!0),d(null),m(!1),0===S.seasons.length){d("At least one season is required"),o(!1);return}for(let e of S.seasons){if(0===e.episodes.length){d("Season ".concat(e.seasonNumber," must have at least one episode")),o(!1);return}for(let s of e.episodes){if(!s.episodeTitle.trim()){d("Episode ".concat(s.episodeNumber," in Season ").concat(e.seasonNumber," is missing a title")),o(!1);return}if(!s.downloadLink.trim()){d("Episode ".concat(s.episodeNumber," in Season ").concat(e.seasonNumber," is missing a download link")),o(!1);return}}}try{let e={title:S.title,description:S.description,type:"series",poster:S.poster,backdrop:S.backdrop||null,language:S.language,category:S.category,year:Number(S.year),rating:S.rating?parseFloat(S.rating):null,seasons:S.seasons},a=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json","x-admin-key":s},body:JSON.stringify(e)}),l=await a.json();if(!l.success)throw Error(l.message||"Failed to upload series");m(!0),Z({title:"",description:"",poster:"",backdrop:"",language:"",category:"",year:new Date().getFullYear(),rating:"",seasons:[],tmdbId:""}),N(""),null==t||t()}catch(e){d(e instanceof Error?e.message:"An error occurred")}finally{o(!1)}};return(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl p-6 sm:p-8",style:{background:"linear-gradient(135deg, #0E1015 0%, #1a1d26 100%)",border:"1px solid #1F232D"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-[#8B5CF6]/10 flex items-center justify-center",children:(0,a.jsx)(C.Z,{className:"w-5 h-5 text-[#8B5CF6]"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-[#F9FAFB]",children:"Upload Series"})]}),(0,a.jsx)("div",{className:"mb-6 p-4 rounded-xl bg-[#8B5CF6]/10 border border-[#8B5CF6]/20",children:(0,a.jsxs)("form",{onSubmit:L,className:"relative",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 inline mr-1"}),"Search from TMDB (Auto-fill details)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:x,onChange:e=>{N(e.target.value),e.target.value||(B(!1),k([]))},onFocus:()=>w.length>0&&B(!0),className:"flex-1 px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors",placeholder:"Search TV shows..."}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"px-4 py-3 rounded-xl bg-[#8B5CF6] text-white font-medium hover:bg-[#8B5CF6]/90 transition-colors disabled:opacity-50",children:y?(0,a.jsx)(p.Z,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(u.Z,{className:"w-5 h-5"})})]}),D&&w.length>0&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-[#1a1d26] border border-[#1F232D] rounded-xl max-h-60 overflow-y-auto",children:w.map(e=>{var s,t;return(0,a.jsxs)("button",{type:"button",onClick:()=>I(e),className:"w-full flex items-center gap-3 p-3 hover:bg-[#1F232D] transition-colors text-left",children:[e.poster&&(0,a.jsx)("img",{src:e.poster,alt:"",className:"w-10 h-14 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-[#F9FAFB] font-medium truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-[#9CA3AF]",children:[null===(s=e.releaseDate)||void 0===s?void 0:s.split("-")[0]," • ",null===(t=e.rating)||void 0===t?void 0:t.toFixed(1)," ★"]})]})]},e.tmdbId)})})]})}),i&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400",children:i}),c&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-xl bg-[#22C55E]/10 border border-[#22C55E]/20 text-[#22C55E]",children:"Series uploaded successfully!"}),(0,a.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 inline mr-1"}),"Title *"]}),(0,a.jsx)("input",{type:"text",name:"title",value:S.title,onChange:q,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors",placeholder:"Enter series title"})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 inline mr-1"}),"Description *"]}),(0,a.jsx)("textarea",{name:"description",value:S.description,onChange:q,required:!0,rows:4,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors resize-none",placeholder:"Enter series description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-1"}),"Poster URL *"]}),(0,a.jsx)("input",{type:"url",name:"poster",value:S.poster,onChange:q,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors",placeholder:"https://example.com/poster.jpg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-1"}),"Backdrop URL"]}),(0,a.jsx)("input",{type:"url",name:"backdrop",value:S.backdrop,onChange:q,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors",placeholder:"https://example.com/backdrop.jpg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(F.Z,{className:"w-4 h-4 inline mr-1"}),"Language *"]}),(0,a.jsx)("input",{type:"text",name:"language",value:S.language,onChange:q,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors",placeholder:"e.g., English, Hindi"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 inline mr-1"}),"Category *"]}),(0,a.jsx)("input",{type:"text",name:"category",value:S.category,onChange:q,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors",placeholder:"e.g., Drama, Thriller"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 inline mr-1"}),"Year *"]}),(0,a.jsx)("input",{type:"number",name:"year",value:S.year,onChange:q,required:!0,min:1900,max:2100,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 inline mr-1"}),"Rating (TMDB)"]}),(0,a.jsx)("input",{type:"number",name:"rating",value:S.rating,onChange:q,min:0,max:10,step:.1,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#8B5CF6] focus:outline-none transition-colors",placeholder:"0.0 - 10.0"})]})]}),(0,a.jsxs)("div",{className:"p-6 rounded-xl",style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#8B5CF6] mb-4",children:"Seasons & Episodes"}),(0,a.jsx)(E,{seasons:S.seasons,onChange:e=>{Z(s=>({...s,seasons:e}))}})]}),(0,a.jsx)("button",{type:"submit",disabled:r,className:"w-full py-4 px-6 rounded-xl bg-[#8B5CF6] text-white font-semibold flex items-center justify-center gap-2 hover:bg-[#8B5CF6]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"Upload Series"]})})]})]})}var Z=t(6780),L=t(2468),I=t(4697),q=t(3787),T=t(9913);function M(e){let{content:s,onEdit:t,onDelete:r,loading:o=!1}=e,[i,d]=(0,l.useState)(null),c=e=>{i===(e._id||e.id)?(r(e),d(null)):d(e._id||e.id||null)},x=e=>{var s,t;return"movie"===e.type?!!(null===(s=e.movieData)||void 0===s?void 0:s.embedIframeLink):(null===(t=e.seasons)||void 0===t?void 0:t.some(e=>e.episodes.some(e=>e.embedIframeLink)))||!1};return o?(0,a.jsx)("div",{className:"rounded-2xl p-8",style:{background:"#0E1015",border:"1px solid #1F232D"},children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-[#F5C542] border-t-transparent rounded-full animate-spin"})})}):0===s.length?(0,a.jsx)("div",{className:"rounded-2xl p-8",style:{background:"#0E1015",border:"1px solid #1F232D"},children:(0,a.jsxs)("div",{className:"text-center py-12 text-[#9CA3AF]",children:[(0,a.jsx)(Z.Z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No content found."})]})}):(0,a.jsx)("div",{className:"rounded-2xl overflow-hidden",style:{background:"#0E1015",border:"1px solid #1F232D"},children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-[#1F232D]",children:[(0,a.jsx)("th",{className:"px-4 py-4 text-left text-xs font-medium text-[#9CA3AF] uppercase tracking-wider",children:"Content"}),(0,a.jsx)("th",{className:"px-4 py-4 text-left text-xs font-medium text-[#9CA3AF] uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-4 py-4 text-left text-xs font-medium text-[#9CA3AF] uppercase tracking-wider",children:"Language"}),(0,a.jsx)("th",{className:"px-4 py-4 text-left text-xs font-medium text-[#9CA3AF] uppercase tracking-wider",children:"Category"}),(0,a.jsx)("th",{className:"px-4 py-4 text-left text-xs font-medium text-[#9CA3AF] uppercase tracking-wider",children:"Year"}),(0,a.jsx)("th",{className:"px-4 py-4 text-left text-xs font-medium text-[#9CA3AF] uppercase tracking-wider",children:"Embed Available"}),(0,a.jsx)("th",{className:"px-4 py-4 text-right text-xs font-medium text-[#9CA3AF] uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-[#1F232D]",children:s.map((e,s)=>{var l,r;let o=x(e),d=e._id||e.id;return(0,a.jsxs)(n.E.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"hover:bg-[#1F232D]/30 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-14 rounded-lg overflow-hidden flex-shrink-0 bg-[#1F232D]",children:e.poster?(0,a.jsx)("img",{src:e.poster,alt:e.title,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"movie"===e.type?(0,a.jsx)(m.Z,{className:"w-4 h-4 text-[#9CA3AF]"}):(0,a.jsx)(C.Z,{className:"w-4 h-4 text-[#9CA3AF]"})})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-[#F9FAFB] truncate max-w-[200px]",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-[#9CA3AF]",children:"series"===e.type?"".concat((null===(l=e.seasons)||void 0===l?void 0:l.length)||0," season").concat(1!==((null===(r=e.seasons)||void 0===r?void 0:r.length)||0)?"s":""):e.duration||"Movie"})]})]})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat("movie"===e.type?"bg-[#F5C542]/10 text-[#F5C542]":"bg-[#8B5CF6]/10 text-[#8B5CF6]"),children:["movie"===e.type?(0,a.jsx)(m.Z,{className:"w-3 h-3"}):(0,a.jsx)(C.Z,{className:"w-3 h-3"}),"movie"===e.type?"Movie":"Series"]})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("span",{className:"text-sm text-[#9CA3AF]",children:e.language})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("span",{className:"text-sm text-[#9CA3AF]",children:e.category})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("span",{className:"text-sm text-[#9CA3AF]",children:e.year})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat(o?"bg-[#22C55E]/10 text-[#22C55E]":"bg-[#6B7280]/10 text-[#6B7280]"),children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{className:"w-3 h-3"}),"Yes"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.Z,{className:"w-3 h-3"}),"No"]})})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("a",{href:"/".concat("movie"===e.type?"watch":"series/watch","/").concat(e._id||e.id),target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-[#1F232D] text-[#9CA3AF] hover:text-[#F5C542] transition-colors",title:"View",children:(0,a.jsx)(q.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>t(e),className:"p-2 rounded-lg hover:bg-[#1F232D] text-[#9CA3AF] hover:text-[#F5C542] transition-colors",title:"Edit",children:(0,a.jsx)(T.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>c(e),className:"p-2 rounded-lg transition-colors ".concat(i===d?"bg-red-500/20 text-red-500":"hover:bg-red-500/10 text-[#9CA3AF] hover:text-red-500"),title:i===d?"Confirm Delete":"Delete",children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]})})]},d)})})]})})})}var U=t(9061);function R(e){var s,t;let{content:r,isOpen:i,onClose:d,onSave:c,adminKey:u}=e,[p,v]=(0,l.useState)(!1),[A,E]=(0,l.useState)(null),[S,Z]=(0,l.useState)(null),[L,q]=(0,l.useState)([]);(0,l.useEffect)(()=>{r&&(Z({...r}),r.seasons&&q(r.seasons.map(e=>e.seasonNumber)))},[r]);let T=e=>{if(!S)return;let{name:s,value:t}=e.target;Z(e=>e?{...e,[s]:"year"===s||"rating"===s?t?parseFloat(t):void 0:t}:null)},M=(e,s)=>{S&&Z(t=>t?{...t,movieData:{...t.movieData,[e]:s||null}}:null)},R=e=>{q(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},P=e=>{(null==S?void 0:S.seasons)&&(Z(s=>{var t;return s?{...s,seasons:null===(t=s.seasons)||void 0===t?void 0:t.filter(s=>s.seasonNumber!==e)}:null}),q(s=>s.filter(s=>s!==e)))},H=e=>{if(!(null==S?void 0:S.seasons))return;let s=S.seasons.find(s=>s.seasonNumber===e);if(!s)return;let t=s.episodes.length>0?Math.max(...s.episodes.map(e=>e.episodeNumber))+1:1,a={episodeNumber:t,episodeTitle:"Episode ".concat(t),embedIframeLink:"",downloadLink:"",quality:"HD"};Z(s=>{var t;return s?{...s,seasons:null===(t=s.seasons)||void 0===t?void 0:t.map(s=>s.seasonNumber===e?{...s,episodes:[...s.episodes,a]}:s)}:null})},Y=(e,s)=>{(null==S?void 0:S.seasons)&&Z(t=>{var a;return t?{...t,seasons:null===(a=t.seasons)||void 0===a?void 0:a.map(t=>t.seasonNumber===e?{...t,episodes:t.episodes.filter(e=>e.episodeNumber!==s)}:t)}:null})},_=(e,s,t)=>{(null==S?void 0:S.seasons)&&Z(a=>{var l;return a?{...a,seasons:null===(l=a.seasons)||void 0===l?void 0:l.map(a=>a.seasonNumber===e?{...a,episodes:a.episodes.map(e=>e.episodeNumber===s?{...e,...t}:e)}:a)}:null})},K=async e=>{if(e.preventDefault(),S){v(!0),E(null);try{if("movie"===S.type){var s;if(!(null===(s=S.movieData)||void 0===s?void 0:s.downloadLink))throw Error("Download link is required for movies")}else if("series"===S.type){if(!S.seasons||0===S.seasons.length)throw Error("At least one season is required");for(let e of S.seasons){if(0===e.episodes.length)throw Error("Season ".concat(e.seasonNumber," must have at least one episode"));for(let s of e.episodes)if(!s.downloadLink)throw Error("Episode ".concat(s.episodeNumber," in Season ").concat(e.seasonNumber," is missing a download link"))}}let e=await fetch("/api/content/".concat(S._id||S.id),{method:"PUT",headers:{"Content-Type":"application/json","x-admin-key":u},body:JSON.stringify(S)}),t=await e.json();if(!t.success)throw Error(t.message||"Failed to update content");c(),d()}catch(e){E(e instanceof Error?e.message:"An error occurred")}finally{v(!1)}}};return i&&S?(0,a.jsx)(o.M,{children:(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl",style:{background:"linear-gradient(135deg, #0E1015 0%, #1a1d26 100%)",border:"1px solid #1F232D"},children:[(0,a.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between p-6 border-b border-[#1F232D] bg-[#0E1015]/95 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("movie"===S.type?"bg-[#F5C542]/10":"bg-[#8B5CF6]/10"),children:"movie"===S.type?(0,a.jsx)(m.Z,{className:"w-5 h-5 text-[#F5C542]"}):(0,a.jsx)(C.Z,{className:"w-5 h-5 text-[#8B5CF6]"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-[#F9FAFB]",children:["Edit ","movie"===S.type?"Movie":"Series"]}),(0,a.jsx)("p",{className:"text-sm text-[#9CA3AF]",children:S.title})]})]}),(0,a.jsx)("button",{onClick:d,className:"p-2 rounded-lg hover:bg-[#1F232D] text-[#9CA3AF] hover:text-[#F9FAFB] transition-colors",children:(0,a.jsx)(I.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("form",{onSubmit:K,className:"p-6 space-y-6",children:[A&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400",children:A}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 inline mr-1"}),"Title *"]}),(0,a.jsx)("input",{type:"text",name:"title",value:S.title,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 inline mr-1"}),"Description *"]}),(0,a.jsx)("textarea",{name:"description",value:S.description,onChange:T,required:!0,rows:4,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors resize-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-1"}),"Poster URL *"]}),(0,a.jsx)("input",{type:"url",name:"poster",value:S.poster,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-1"}),"Backdrop URL"]}),(0,a.jsx)("input",{type:"url",name:"backdrop",value:S.backdrop||"",onChange:T,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(F.Z,{className:"w-4 h-4 inline mr-1"}),"Language *"]}),(0,a.jsx)("input",{type:"text",name:"language",value:S.language,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 inline mr-1"}),"Category *"]}),(0,a.jsx)("input",{type:"text",name:"category",value:S.category,onChange:T,required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 inline mr-1"}),"Year *"]}),(0,a.jsx)("input",{type:"number",name:"year",value:S.year,onChange:T,required:!0,min:1900,max:2100,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 inline mr-1"}),"Rating"]}),(0,a.jsx)("input",{type:"number",name:"rating",value:S.rating||"",onChange:T,min:0,max:10,step:.1,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors"})]})]}),"movie"===S.type&&(0,a.jsxs)("div",{className:"p-6 rounded-xl space-y-6",style:{background:"rgba(245, 197, 66, 0.05)",border:"1px solid rgba(245, 197, 66, 0.2)"},children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-[#F5C542] flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5"}),"Streaming Links"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:"Embed Iframe Link"}),(0,a.jsx)("input",{type:"url",value:(null===(s=S.movieData)||void 0===s?void 0:s.embedIframeLink)||"",onChange:e=>M("embedIframeLink",e.target.value),className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/embed/..."}),(0,a.jsx)("p",{className:"mt-1 text-xs text-[#9CA3AF]",children:"Paste embed player URL (iframe src link)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 inline mr-1"}),"Download Link *"]}),(0,a.jsx)("input",{type:"url",value:(null===(t=S.movieData)||void 0===t?void 0:t.downloadLink)||"",onChange:e=>M("downloadLink",e.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/download/..."})]})]})]}),"series"===S.type&&S.seasons&&(0,a.jsxs)("div",{className:"p-6 rounded-xl",style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#8B5CF6] mb-4",children:"Seasons & Episodes"}),(0,a.jsxs)("div",{className:"space-y-4",children:[S.seasons.map(e=>(0,a.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{background:"#050608",border:"1px solid #1F232D"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-[#1F232D]/30 transition-colors",onClick:()=>R(e.seasonNumber),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-[#F5C542]/10 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-sm font-bold text-[#F5C542]",children:["S",e.seasonNumber]})}),(0,a.jsxs)("span",{className:"font-medium text-[#F9FAFB]",children:["Season ",e.seasonNumber]}),(0,a.jsxs)("span",{className:"text-sm text-[#9CA3AF]",children:["(",e.episodes.length," episode",1!==e.episodes.length?"s":"",")"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:s=>{s.stopPropagation(),P(e.seasonNumber)},className:"p-2 rounded-lg hover:bg-red-500/10 text-[#9CA3AF] hover:text-red-400 transition-colors",children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})}),L.includes(e.seasonNumber)?(0,a.jsx)(k.Z,{className:"w-5 h-5 text-[#9CA3AF]"}):(0,a.jsx)(D.Z,{className:"w-5 h-5 text-[#9CA3AF]"})]})]}),L.includes(e.seasonNumber)&&(0,a.jsxs)("div",{className:"p-4 pt-0 space-y-3",children:[e.episodes.map(s=>(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-[#0E1015] border border-[#1F232D] space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded bg-[#8B5CF6]/10 flex items-center justify-center",children:(0,a.jsx)(B.Z,{className:"w-3 h-3 text-[#8B5CF6]"})}),(0,a.jsxs)("span",{className:"text-sm font-medium text-[#F9FAFB]",children:["Episode ",s.episodeNumber]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>Y(e.seasonNumber,s.episodeNumber),className:"p-1.5 rounded hover:bg-red-500/10 text-[#9CA3AF] hover:text-red-400 transition-colors",children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#9CA3AF] mb-1",children:"Episode Title *"}),(0,a.jsx)("input",{type:"text",value:s.episodeTitle,onChange:t=>_(e.seasonNumber,s.episodeNumber,{episodeTitle:t.target.value}),className:"w-full px-3 py-2 rounded-lg bg-[#050608] border border-[#1F232D] text-[#F9FAFB] text-sm focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#9CA3AF] mb-1",children:"Quality"}),(0,a.jsxs)("select",{value:s.quality,onChange:t=>_(e.seasonNumber,s.episodeNumber,{quality:t.target.value}),className:"w-full px-3 py-2 rounded-lg bg-[#050608] border border-[#1F232D] text-[#F9FAFB] text-sm focus:border-[#F5C542] focus:outline-none transition-colors",children:[(0,a.jsx)("option",{value:"SD",children:"SD"}),(0,a.jsx)("option",{value:"HD",children:"HD"}),(0,a.jsx)("option",{value:"FHD",children:"FHD"}),(0,a.jsx)("option",{value:"4K",children:"4K"})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-medium text-[#9CA3AF] mb-1",children:[(0,a.jsx)(N.Z,{className:"w-3 h-3 inline mr-1"}),"Embed Iframe Link"]}),(0,a.jsx)("input",{type:"url",value:s.embedIframeLink||"",onChange:t=>_(e.seasonNumber,s.episodeNumber,{embedIframeLink:t.target.value}),className:"w-full px-3 py-2 rounded-lg bg-[#050608] border border-[#1F232D] text-[#F9FAFB] text-sm focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/embed/..."}),(0,a.jsx)("p",{className:"mt-1 text-xs text-[#9CA3AF]",children:"Paste embed player URL (iframe src link)"})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-medium text-[#9CA3AF] mb-1",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3 inline mr-1"}),"Download Link *"]}),(0,a.jsx)("input",{type:"url",value:s.downloadLink,onChange:t=>_(e.seasonNumber,s.episodeNumber,{downloadLink:t.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg bg-[#050608] border border-[#1F232D] text-[#F9FAFB] text-sm focus:border-[#F5C542] focus:outline-none transition-colors",placeholder:"https://example.com/download/..."})]})]})]},s.episodeNumber)),(0,a.jsxs)("button",{type:"button",onClick:()=>H(e.seasonNumber),className:"w-full py-3 rounded-xl border border-dashed border-[#1F232D] text-[#9CA3AF] hover:text-[#F5C542] hover:border-[#F5C542]/50 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Add Episode"]})]})]},e.seasonNumber)),(0,a.jsxs)("button",{type:"button",onClick:()=>{if(!(null==S?void 0:S.seasons))return;let e=S.seasons.length>0?Math.max(...S.seasons.map(e=>e.seasonNumber))+1:1,s={seasonNumber:e,episodes:[]};Z(e=>e?{...e,seasons:[...e.seasons||[],s]}:null),q(s=>[...s,e])},className:"w-full py-4 rounded-xl bg-[#F5C542]/10 border border-[#F5C542]/30 text-[#F5C542] hover:bg-[#F5C542]/20 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Add Season"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-[#1F232D]",children:[(0,a.jsx)("button",{type:"button",onClick:d,className:"px-6 py-3 rounded-xl border border-[#1F232D] text-[#9CA3AF] hover:text-[#F9FAFB] hover:border-[#9CA3AF] transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-3 rounded-xl bg-[#F5C542] text-[#050608] font-semibold flex items-center gap-2 hover:bg-[#F5C542]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-[#050608] border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.Z,{className:"w-4 h-4"}),"Save Changes"]})})]})]})]})]})}):null}function P(){let[e,s]=(0,l.useState)("content"),[t,u]=(0,l.useState)(""),[p,b]=(0,l.useState)(!1),[h,F]=(0,l.useState)([]),[g,f]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1),[C,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{w(!0)},[]),(0,l.useEffect)(()=>{let e=localStorage.getItem("adminKey");e&&(u(e),b(!0))},[]),(0,l.useEffect)(()=>{p&&k()},[p]);let k=async()=>{f(!0);try{let e=await fetch("/api/content"),s=await e.json();s.success&&F(s.data)}catch(e){console.error("Error fetching content:",e)}finally{f(!1)}},D=async e=>{if(confirm('Are you sure you want to delete "'.concat(e.title,'"? This action cannot be undone.')))try{let s=await fetch("/api/content/".concat(e._id||e.id),{method:"DELETE",headers:{"x-admin-key":t}}),a=await s.json();a.success?(alert("Content deleted successfully!"),k()):alert(a.message||"Failed to delete content")}catch(e){console.error("Error deleting content:",e),alert("Network error. Please check your connection and try again.")}};return C?p?(0,a.jsxs)("div",{className:"min-h-screen bg-[#050608]",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 bg-[#050608]/80 backdrop-blur-xl border-b border-[#1F232D]",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(r.default,{href:"/",className:"flex items-center gap-2 text-[#9CA3AF] hover:text-[#F9FAFB] transition-colors",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Back"})]}),(0,a.jsx)("div",{className:"h-6 w-px bg-[#1F232D]"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-[#F5C542]"}),(0,a.jsx)("span",{className:"font-bold text-[#F9FAFB]",children:"Admin Dashboard"})]})]}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminKey"),u(""),b(!1)},className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-red-500/10 text-[#9CA3AF] hover:text-red-400 transition-colors",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-8",children:[(0,a.jsxs)("button",{onClick:()=>s("content"),className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all ".concat("content"===e?"bg-[#F5C542] text-[#050608]":"bg-[#0E1015] text-[#9CA3AF] hover:text-[#F9FAFB] border border-[#1F232D]"),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"All Content"]}),(0,a.jsxs)("button",{onClick:()=>s("movies"),className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all ".concat("movies"===e?"bg-[#F5C542] text-[#050608]":"bg-[#0E1015] text-[#9CA3AF] hover:text-[#F9FAFB] border border-[#1F232D]"),children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Add Movie"]}),(0,a.jsxs)("button",{onClick:()=>s("series"),className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all ".concat("series"===e?"bg-[#8B5CF6] text-white":"bg-[#0E1015] text-[#9CA3AF] hover:text-[#F9FAFB] border border-[#1F232D]"),children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Add Series"]})]}),(0,a.jsxs)(o.M,{mode:"wait",children:["content"===e&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-[#F9FAFB]",children:"Manage Content"}),(0,a.jsxs)("span",{className:"text-sm text-[#9CA3AF]",children:[h.length," item",1!==h.length?"s":""]})]}),(0,a.jsx)(M,{content:h,onEdit:e=>{N(e),v(!0)},onDelete:D,loading:g})]},"content"),"movies"===e&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(0,a.jsx)(A,{adminKey:t,onSuccess:()=>{k(),s("content")}})},"movies"),"series"===e&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(0,a.jsx)(S,{adminKey:t,onSuccess:()=>{k(),s("content")}})},"series")]})]}),(0,a.jsx)(R,{content:j,isOpen:y,onClose:()=>{v(!1),N(null)},onSave:()=>{k(),v(!1),N(null)},adminKey:t})]}):(0,a.jsx)("div",{className:"min-h-screen bg-[#050608] flex items-center justify-center px-4",children:(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-[#F5C542]/10 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 text-[#F5C542]"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#F9FAFB]",children:"Admin Login"}),(0,a.jsx)("p",{className:"text-[#9CA3AF] mt-2",children:"Enter your admin key to access the dashboard"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.trim()&&(localStorage.setItem("adminKey",t),b(!0))},className:"rounded-2xl p-6",style:{background:"linear-gradient(135deg, #0E1015 0%, #1a1d26 100%)",border:"1px solid #1F232D"},children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#9CA3AF] mb-2",children:"Admin Key"}),(0,a.jsx)("input",{type:"password",value:t,onChange:e=>u(e.target.value),placeholder:"Enter admin key",className:"w-full px-4 py-3 rounded-xl bg-[#050608] border border-[#1F232D] text-[#F9FAFB] placeholder-[#9CA3AF]/50 focus:border-[#F5C542] focus:outline-none transition-colors"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-3 px-4 bg-[#F5C542] text-[#050608] rounded-xl font-semibold hover:bg-[#F5C542]/90 transition-colors",children:"Login"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)(r.default,{href:"/",className:"text-[#9CA3AF] hover:text-[#F9FAFB] transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Back to Home"]})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-[#050608]"})}}},function(e){e.O(0,[629,728,971,23,744],function(){return e(e.s=1477)}),_N_E=e.O()}]);